# <span id="page-169-0"></span>7 **Errors and Bad Practices**

### <span id="page-169-1"></span>**7.1 Errors**

Poor implementation of the Gerber format can give rise to invalid Gerber files or – worse – valid Gerber files that do not represent the intended image. The table below lists the most common errors.

| Symptom                                                                        | Cause and Correct Usage                                                                                                                                                                                                                                  |
|--------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Standard Gerber or RS-274-D                                                    | Standard Gerber is revoked and is therefore no<br>longer valid Gerber. It was designed for a<br>workflow that is as obsolete as the mechanical<br>typewriter. It requires manual interpretation and<br>is therefore error-prone. Do not use it. See 8.5. |
|                                                                                | Always use Gerber X!                                                                                                                                                                                                                                     |
| Clearances in planes disappear.                                                | This is often the consequence of invalid cut-ins<br>resulting in self-intersecting contours. The root<br>cause is usually sloppy rounding aggravated by<br>low-resolution output. Use 6 digits precision.                                                |
|                                                                                | See 4.10.3.                                                                                                                                                                                                                                              |
| Rotating aperture macros using primitive 21<br>gives unexpected results.       | Some CAD systems incorrectly assume that<br>primitive 21 rotates around its center. This is<br>wrong, it rotates around the origin.                                                                                                                      |
|                                                                                | See 4.5.1.5.                                                                                                                                                                                                                                             |
| Unexpected image after an aperture change<br>or a D03.                         | Coordinates have been used without an explicit<br>D01/D02/D03 operation code. This practice is<br>deprecated because it leads to confusion about<br>which operation code to use.                                                                         |
|                                                                                | Coordinate data must always be combined<br>with an explicit D01/D02/D03 operation code.                                                                                                                                                                  |
|                                                                                | See 8.1.10.                                                                                                                                                                                                                                              |
| Objects unexpectedly appear or disappear<br>under holes in standard apertures. | Some CAD systems incorrectly assume the hole<br>in an aperture clears the underlying image. This<br>is not so, the hole has no effect on the<br>underlying image.                                                                                        |
|                                                                                | See 4.4.6.                                                                                                                                                                                                                                               |
| Objects unexpectedly appear or disappear<br>under holes in macro apertures.    | Some systems incorrectly assume that<br>exposure off in a macro aperture clears the<br>underlying objects under the flash. This is<br>wrong, exposure off creates a hole in the<br>aperture and that hole has no effect on the<br>image.                 |
|                                                                                | See 4.5.1.                                                                                                                                                                                                                                               |

![](_page_170_Picture_0.jpeg)

| Polygons are smaller than expected.                                                        | Some CAD systems incorrectly assume the                                                                                                                                                                                                                                                                                                                              |
|--------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                                                                            | parameter of a Regular Polygon specifies the<br>inside diameter. This is wrong: it specifies the<br>outside diameter.                                                                                                                                                                                                                                                |
|                                                                                            | See 4.4.5.                                                                                                                                                                                                                                                                                                                                                           |
| The result of the MI command is not as<br>expected.                                        | The MI command mirrors coordinate data but<br>not apertures. A number of implementations<br>unfortunately also mirror apertures making MI<br>unsafe to use. It is therefore deprecated. Do not<br>use the MI command but apply the<br>transformation directly in the coordinate data.<br>See 8.1.7.                                                                  |
| The result of the SF command is not as<br>expected.                                        | The SF command scales coordinate data but no<br>other sizes in the file. A number of<br>implementations unfortunately also scale other<br>elements making SF unsafe to use. It is<br>therefore deprecated. Do not use the SF<br>command but apply the transformation directly<br>in the coordinate data.                                                             |
|                                                                                            | See 8.1.9                                                                                                                                                                                                                                                                                                                                                            |
| A single Gerber file contains more than one<br>image, separated by M00, M01 or M02         | This is invalid. A Gerber file can contain only one<br>image.                                                                                                                                                                                                                                                                                                        |
|                                                                                            | One file, one image. One image, one file.                                                                                                                                                                                                                                                                                                                            |
| Sending a PCB layer as several<br>positive/negative files that must be merged<br>together. | This is invalid in Gerber X. See 2.1. (It was valid<br>in Standard Gerber but became obsolete with<br>the introduction of LPD/LPC in Gerber X.) Apart<br>from being invalid this obnoxious practice<br>requires manual work and is error prone. One<br>wonders why someone in his right mind would<br>use this archaic method, which has a serious<br>risk of scrap. |
|                                                                                            | One file = one layer                                                                                                                                                                                                                                                                                                                                                 |
| Strange error message.                                                                     | Some files contain the strange pseudo<br>command %ICAS*%. One wonders what this is<br>supposed to achieve. Anyhow, it is invalid.                                                                                                                                                                                                                                    |
| Error message; not the intended image.                                                     | Invalid format specification %FSD*%                                                                                                                                                                                                                                                                                                                                  |
|                                                                                            | The only valid zero omission options in the %FS<br>are L and T. D is invalid. See 8.2.1.1.                                                                                                                                                                                                                                                                           |
| Strange error message.                                                                     | *Presence of %FSLAN2X26Y26*%                                                                                                                                                                                                                                                                                                                                         |
|                                                                                            | The N2 in the format specification is invalid. See<br>4.1 One wonders what it is supposed to do.                                                                                                                                                                                                                                                                     |
| Strange error message.                                                                     | …X5555Y5555IJ001                                                                                                                                                                                                                                                                                                                                                     |
|                                                                                            | Missing zero after the "I". The number after I<br>must have at least one digit, see 13.5                                                                                                                                                                                                                                                                             |

#### *Reported errors*

![](_page_171_Picture_0.jpeg)

### <span id="page-171-0"></span>**7.2 Bad Practices**

Some Gerber files are syntactically correct but are needlessly cumbersome or error-prone. The table below summarizes common poor practices and gives the corresponding good practice.

| Bad Practice                                               | Problems                                                                                                                                                                                                                                                                                                                                                                                               | Good Practice                                                                                                                                                  |
|------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| PCB fabrication data sets<br>without proper profile layer. | The profile is an essential part of<br>the fabrication data. It must be<br>accurately defined, in a machine<br>readable manner. All too often only<br>a drawing is provided, or corner<br>marks, or the profile is only present<br>merged in copper layers etc.                                                                                                                                        | Always include a<br>profile layer with a<br>clean, accurately<br>constructed profile.<br>See 6.5                                                               |
| Painted copper pours (aka<br>stroking or vector-fill)      | Painted copper pours produce the<br>intended image, but the file size<br>explodes and getting rid of the<br>painting require time consuming<br>and error-prone manual work by<br>CAM operators. Painting was<br>needed for vector photoplotters in<br>the 1960s and 1970s, devices now<br>as outdated as the mechanical<br>typewriter. There is not a single<br>reason left to use painting.           | Always define<br>copper pours with<br>contours (G36/G37)                                                                                                       |
| Painted pads (aka stroking or<br>vector-fill)              | See painted copper pours above.<br>Painting is even more damaging for<br>pads, as the fabricator needs to<br>know where the pads are, for<br>example for electrical test. The only<br>practical way to identify pads is to<br>use flashes for pads exclusively.                                                                                                                                        | Always use flashed<br>pads. Define pads,<br>including SMD pads,<br>with the AD and AM<br>commands.                                                             |
| Pads as contours instead of<br>flashes                     | See above.                                                                                                                                                                                                                                                                                                                                                                                             | Always use flashed<br>pads. Define pads,<br>including SMD pads,<br>with the AD and AM<br>commands.                                                             |
| PCB fabrication data sets<br>without netlist.              | PCB fabrication data is complex<br>geometric data with an infinite<br>number of variations. Differences in<br>the interpretation of image data is<br>very rare but does happen and then<br>is costly. A netlist is a powerful<br>check on the image data – it is akin<br>to the redundancy checks used in<br>all data transfer protocols. Omitting<br>a netlist is omitting a basic security<br>check. | Always include a<br>netlist in a PCB<br>fabrication data set.<br>A netlist can be<br>provided in IPC-D<br>356A file or with<br>Gerber attributes –<br>see 6.8. |

![](_page_172_Picture_0.jpeg)

| Low resolution (number of<br>decimals in coordinates <6)                                                       | Poor registration of objects between<br>PCB layers; loss of accuracy; self<br>intersecting contours; invalid arcs;<br>turning small arcs into full circles,<br>missing clearances. Poor numerical<br>accuracy is the main cause for<br>errors in geometric software. Low<br>resolution is the root cause for most<br>problems with Gerber files and<br>sometimes leads to scrap. | Use 6 decimals in<br>mm units. See 4.1<br>and 8.2.1.                                                                                                   |
|----------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------|
|                                                                                                                | Why would one use low resolution?<br>To save a few bytes? It is<br>sometimes argued some Gerber<br>readers can only handle low<br>resolutions. This may have been<br>true in the distant past but it is no<br>longer true now. Will you risk scrap<br>to cater for a few probably mythical<br>antiquated implementations?                                                        |                                                                                                                                                        |
| Cutting a single copper pour<br>in pieces, typically through the<br>clearances to avoid regions<br>with holes. | The information what the copper<br>pour is and where the clearances<br>are is lost in a tangle of data, made<br>worse by rounding error. The reader<br>must attempt to laboriously reverse<br>engineer the copper pour and<br>clearances. Risk of scrap.                                                                                                                         | See section 4.10.5.                                                                                                                                    |
| Imprecisely positioned arc<br>center points                                                                    | An imprecisely positioned center<br>makes the arc ambiguous and open<br>to interpretation. This can lead to<br>unexpected results.<br>See 4.7.2                                                                                                                                                                                                                                  | Always position arc<br>center points<br>precisely.                                                                                                     |
| Non-standard file extensions                                                                                   | When you use a non-standard file<br>extension the reader must open the<br>file to know what format it is and<br>which application to use.<br>See 3.5.                                                                                                                                                                                                                            | Please use ".gbr" or<br>".GBR" as file<br>extension for all<br>your Gerber files.                                                                      |
| Writing files with deprecated<br>constructs.                                                                   | Each construct was deprecated for<br>a reason. Many carry the risk of a<br>misinterpretation. Continuing to use<br>deprecated constructs is bad<br>corporate citizenship as it blocks the<br>industry from taking the next steps.                                                                                                                                                | Generate files with<br>current constructs<br>only. (Note: it is OK<br>for readers to handle<br>deprecated constructs<br>to cater for legacy<br>files.) |

*Bad/good practices*

![](_page_173_Picture_0.jpeg)

